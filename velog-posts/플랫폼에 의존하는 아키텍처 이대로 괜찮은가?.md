<h3 id="서론">서론</h3>
<p>2025년이 어느덧 한달밖에 남지 않았다. 올해는 정말 IT적으로 다사다난한 일이 많았다고 생각한다. 통신사 보안 이슈부터 시작해서 AWS, Cloudflare, 전날의 CME 전산마비까지..
또 작년을 보면 크라우드 스트라이크사의 잘못된 패치 하나로 세계적인 마비가 찾아왔다.</p>
<p>일련의 사건들을 바라보며 뭔가 플랫폼 내부적으로 아무리 열심히 SPoF를 대비해도 결국 플랫폼 그 자체가 SPoF가 되어버리는 느낌을 지울 수가 없었다.</p>
<h3 id="spof-란">SPoF 란?</h3>
<p><img alt="" src="https://velog.velcdn.com/images/ysj7191/post/647aebcf-15dd-4964-954b-6033a19c29d9/image.png" /></p>
<p>SPoF란 단일 실패 지점(Single Point of Failure)이다.</p>
<p>쉽게 설명하자면 뭔가 하나 죽는다고 모든 시스템이 다 죽어버리는, 또는 큰 영향을 미치는 상황을 의미한다.
이번 국가 전산망 사태 역시 일종의 SPoF 라고 볼 수 있겠다.</p>
<p>이는 전쟁에서도 찾아볼 수 있는 사례인데, 정사 삼국지를 보면 관우가 후방에 대한 감시를 위해 봉화를 설치하고 공격이 들어오면 봉화를 피우게 했으나 적군이 봉화 자체를 무력화하면서 SPoF가 발생하여 대패한 사례가 있곗다.</p>
<p>여담이지만 이전에 필자도 유니페스에서의 문제를 해결하며 겪었던 문제로, 하단의 링크를 통해 확인할 수 있다.</p>
<p><a href="https://velog.io/@ysj7191/%EB%A0%88%EB%94%94%EC%8A%A4%EC%97%90-%EC%9D%98%EC%A1%B4%EC%A0%81%EC%9D%B8-FCM-%ED%86%A0%ED%81%B0-%EC%95%88%EC%A0%95%EC%84%B1-%EA%B0%95%ED%99%94%ED%95%98%EA%B8%B0">레디스에 의존적인 FCM 토큰 안정성 강화하기
</a>
&nbsp;</p>
<h3 id="spof의-해결법">SPoF의 해결법</h3>
<p>고가용성 아키텍처를 운영하려면 반드시 SPoF를 찾아 해소하는 절차가 필요하다.</p>
<p>SPoF는 그 이름에도 있듯 Single에서 시작되는 문제이다. 따라서 <strong>이중화</strong>가 가장 중요하다.
&nbsp;</p>
<h3 id="근데-클라우드는-어떻게-해">근데 클라우드는 어떻게 해?</h3>
<p><img alt="" src="https://velog.velcdn.com/images/ysj7191/post/353a7786-7e6e-475e-b585-be903a438484/image.png" /></p>
<p>Multi-AZ라는 방식이 있다. 간략히 설명하자면, RDS가 죽었을 때 다른 zone에 있는 DB를 standby 시켜두었다가 master가 죽을 경우 master로 승격시키는 작업이다. 어떻게 보면 RAID 1 과도 유사한 부분이 있다고 볼 수 있다.</p>
<p>또한 가용영역이 다르기 때문에 혹시 해당 AZ에 화재 또는 천재지변이 발생한 경우에도 회복이 가능하다는 점이 있다. 추가 가격이 들지만 가용성이 중요한 회사 입장에서는 꼭 필요한 기능인데, 안타깝게도 이번엔…</p>
<p><img alt="" src="https://velog.velcdn.com/images/ysj7191/post/ed168013-0af7-41dc-a78e-de4a5e891e75/image.png" /></p>
<p>Region 자체에 장애가 생기며 Multi-AZ는 큰 효과를 발휘하지 못했을 것으로 보고 있다.</p>
<p>&nbsp;</p>
<h3 id="cloudflare-너-마저">Cloudflare 너 마저..</h3>
<p><img alt="" src="https://velog.velcdn.com/images/ysj7191/post/60c9b6f1-7d6e-4d26-8993-81e853f015db/image.png" /></p>
<p>AWS 장애의 충격이 가시기도 전에 Cloudflare 장애가 발생하였다. 간략히 적자면 DB의 권한을 잘못 지정하며 bot을 처리하는 파일의 크기에 이상이 생기며 시스템 전체적인 장애가 발생한 것이었다.</p>
<p>차이가 다소 있다면 AWS는 Region의 폭파로 해당 Region에 인스턴스를 생성하지 않았다면 문제가 없었겠으나 CloudFlare는 그냥 서비스 전체가 다 죽어버리며 Cloudflare를 사용한 모든 서비스가 접속 불가 사태에 빠졌다는 것이다.</p>
<h3 id="플랫폼-의존성-이대로-괜찮은가">플랫폼 의존성 이대로 괜찮은가</h3>
<p><img alt="" src="https://velog.velcdn.com/images/ysj7191/post/12ab2667-dc0f-49ab-a137-c85ca8857ed8/image.png" /></p>
<p>AWS와 Cloudflare 장애는 개인적으로 앞으로의 아키텍처 메타에 변화를 줄 수도 있는 분기점이 될 수도 있다고 생각한다. 물론 둘은 편리함과 많은 이점으로 인해 많은 회사들이 여전히 사용할 것이지만, 이러한 사태가 지속된다면 과연 신뢰도를 잃은 플랫폼을 지속적으로 회사들이 사용을 할 것인지 의문이 들지도 모른다.</p>
<p>회사는 자체적으로 플랫폼에 대한 이중화를 구성하거나, 온프레미스 환경을 추가적으로 활용하는 것으로 선회할 가능성은 적긴 하더라도 가능한 미래 중 하나라는 생각이 든다.</p>
<p>&nbsp;</p>
<h3 id="부록-그냥-생각해보는-학생-개발자로서의-상상">부록) 그냥 생각해보는 학생 개발자로서의 상상</h3>
<p>포스트를 작성하던 중 문득 든 생각이 하나 있다. 우리는 예상치 못한 문제에 대하여 이미 신청하고 있는 서비스가 있다. 바로 “보험(insurance)”이다. 뭔가 보험을 클라우드에 적용할 수 없을까는 생각을 해보았다.</p>
<p>매달 보험료를 받고 혹시 특정 플랫폼/리전 자체가 죽어버렸을 때를 대비하여 일종의 람다와 유사한 플랫폼을 제공하는 것이다. (당연히 보험료는 회사가 직접 플랫폼을 이중화하였을 때에 비해 적은 비용이 들어야할 것이다)</p>
<p>클라우드 보험 회사는 항상 서버를 가동하고 있을 이유는 없다. 사고가 발생했을 때만 서버를 풀가동하면 되기 때문이다.</p>
<p>근데 아무리 생각해봐도 이거 자체만으로는 막심한 재정적 손해가 있어서 아무도 안 하는 듯 하다 ㅎㅎ..
만일 이 기획을 가지고 회사를 차리려면 최소한 주식 선물 옵션 거래에서 나오는 콜/풋 마냥 사고가 났을 때 떼돈을 벌 수 있는 형태가 아니라면 불가할 것으로 보인다.</p>
<p>&nbsp;
※ 오늘 썸네일은 코딩 애플의 영상의 일부를 캡쳐하였습니다.</p>